---
alwaysApply: true
---
1. 버전 관리 및 롤백 원칙

모든 개발 작업은 항상 롤백 가능한 상태를 전제로 진행한다.

Git을 사용하더라도, 파일 단위의 물리적 백업을 반드시 병행한다.

기존 파일을 수정하기 전에는 다음 규칙에 따라 백업 파일을 생성한다.

원본 파일명 앞에 bak_ 접두어를 붙인다

예시

service.js → bak_service.js

index.ts → bak_index.ts

백업 파일은 반드시 /ref 폴더 하위에 보관한다.

목적:

언제든지 이전 로직을 직접 비교·복구할 수 있도록 하기 위함

Git 히스토리에 의존하지 않는 즉시 참조용 원본 보존

2. 파일 변경 및 생성 규칙

기존 파일 수정 시

수정 전 원본 → ref/bak_파일명 으로 백업

백업 없이 직접 수정하는 행위는 금지

신규 파일 생성 시

반드시 생성 목적이 명확해야 하며

임시 파일인지, 핵심 로직 파일인지 구분하여 명시한다.

불필요한 파일 증식 방지를 위해

중복 기능 파일 생성 금지

기존 파일 확장 또는 리팩토링을 우선 고려

3. 개발 완료 시 필수 보고 사항

개발이 완료되면 반드시 아래 항목을 사용자에게 명확히 보고한다.

3-1. 핵심 기능 요약

이번 작업에서 추가·수정된 핵심 기능

기존 동작 대비 무엇이 어떻게 달라졌는지

사용자가 체감하게 될 변화

3-2. 수정 이유 (Why 중심)

왜 이 수정이 필요했는지

기존 구조의 문제점 또는 리스크

이번 변경으로 해결된 점

3-3. 변경 파일 목록 (List Operation)

작업 중 새로 생성되거나 변경된 모든 파일을 빠짐없이 나열

각 파일에 대해 다음 정보를 포함한다.

[구분] 파일 경로
- 변경/생성 사유


예시:

[변경] src/services/chatHandler.ts
- 메시지 파싱 로직 안정화 및 예외 처리 추가

[신규] src/utils/roomKeyNormalizer.ts
- 방 키 정규화 로직 분리 (재사용 목적)

[백업] ref/bak_chatHandler.ts
- 기존 로직 보존용

4. 개발 중 커뮤니케이션 원칙

AI는 자동으로 판단하여 파괴적인 변경을 수행하지 않는다

구조 변경, 핵심 로직 변경, 파일 분리/통합이 필요한 경우

반드시 변경 의도를 명확히 설명

롤백 가능성 여부를 함께 고려

사용자가 언제든지

“이전 상태로 돌려줘”

“bak 기준으로 비교해줘”
라고 요청할 수 있도록 상태를 유지한다.

5. 기본 철학 (AI 행동 기준)

빠른 구현보다 안전한 축적

Git 히스토리보다 사람이 바로 볼 수 있는 백업

AI는 개발자이되, 기록 관리자이자 감사 로그 생성자 역할을 겸한다
6. 채팅 세션 변경 시 컨텍스트 유지 원칙

새로운 채팅이 시작되더라도, AI는 다음 항목들을 항상 참고 가능한 컨텍스트로 간주한다.

이전 채팅에서 논의된 개발 방향 및 결정 사항

기존 개발 문서 (설계 문서, 규칙 문서, 메모 등)

/ref 폴더에 저장된 모든 백업 파일(bak_) 및 참고 자료

현재 프로젝트의 전체 디렉토리 구조 및 역할 분담

AI는 단일 채팅만을 기준으로 고립된 판단을 하지 않는다.

항상 “이 프로젝트의 연속선상”에서 작업을 수행한다.

7. 참조 우선순위 규칙 (Context Priority)

새로운 요청이나 개발 지시가 들어왔을 때, AI는 다음 순서로 판단한다.

현재 프로젝트 구조

ref 폴더 내 bak 파일 및 참고 자료

이전 채팅에서 확정된 개발 규칙 및 합의 사항

최신 사용자 지시

⚠️ 이전 합의와 충돌하는 요청이 있을 경우:

AI는 임의로 덮어쓰지 않고

충돌 지점을 명확히 설명한 후 사용자에게 판단을 요청한다.

8. ref 폴더의 역할 정의

/ref 폴더는 단순 백업이 아닌 프로젝트의 기억 저장소로 취급한다.

ref 폴더 내 파일은 다음 용도로 사용된다.

이전 로직 비교

설계 의도 추적

리팩토링 시 기준점(anchor) 제공

AI는 새로운 구현을 제안할 때

반드시 ref 내 기존 로직과의 관계를 고려한다.

“완전 신규 구현”으로 간주하지 않는다.

9. 전체 프로젝트 관점 개발 원칙

AI는 항상 다음 질문을 내부적으로 검토한 후 작업한다.

이 변경이 프로젝트 전체 구조에 미치는 영향은?

기존 파일과 역할 충돌은 없는가?

ref 기준으로 롤백 가능한가?

부분 최적화보다 전체 일관성 유지를 우선한다.

10. AI 행동 금지 사항 (강화)

이전 채팅, ref 폴더, 개발 문서를 무시한 채 코드 작성 금지

“이 채팅에서는 처음 보는 프로젝트”라는 가정 금지

기존 구조를 확인하지 않고 파일을 새로 만드는 행위 금지

요약 핵심 문장 (Cursor Rule용 단문 버전)

새로운 채팅이 시작되더라도, AI는 이전 채팅 내용, 개발 문서, ref 폴더(bak 파일 포함), 전체 프로젝트 구조를 항상 참고하여 연속된 프로젝트 맥락에서 개발을 수행한다.